---
import HeroText from '~/components/widgets/HeroText.astro';
import Layout from '~/layouts/PageLayout.astro';
import { Icon } from 'astro-icon/components';
import { Image } from 'astro:assets';
import DECAGlass from '../assets/images/DECAGlass.jpeg';
import RegionalImage from '../assets/images/regional-competition.jpg';
import StateImage from '../assets/images/marriot.jpg';

const metadata = {
  title: 'DECA 101',
};

const competitionTypes = [
  {
  title: "Written",
  color: "bg-blue-200",
  content: `
  DECA written events challenge students to present a detailed poster or set of slides they've prepared over several months, all within a 15-minute window. These events are ideal for students who excel at planning ahead and avoiding procrastination.`
  },
  
  { title: "Role Play", color: "bg-green-200", content: "You're placed in a business situation with a problem that you must pitch to your client (Judge), you have 10 minutes to prepare one sheet of notes and 10 minutes to present. It is offered in both team and individual events." },
  { title: "Virtual Business Challenge", color: "bg-purple-200", content: "Virtual Business Challenge (VBC) is a collection of simulation style games where you are tested on your business acumen when placed in the situation of a retail store owner, accountant, and more." }
];

const faqRows = [
  { 
    question: "Business Management and Administration", 
    answer: "In this sector, you'll dive into the nuts and bolts of running a business. Think case studies where you tackle real issues companies face. You might role-play as a manager or team leader, figuring out how to keep things running smoothly and make smart decisions. Itâ€™s all about getting hands-on experience with leadership and operations.", 
    color: "bg-business-management" 
  }, 
  { 
    question: "Entrepreneurship", 
    answer: "Here, it's all about turning your ideas into reality. Youâ€™ll work on crafting a business plan, doing some market research, and pitching your startup concepts. Itâ€™s a chance to get creative and think outside the box while learning what it really takes to launch a business from the ground up.", 
    color: "bg-entrepreneurship" 
  },
  { 
    question: "Finance", 
    answer: "If numbers are your thing, this sector is where youâ€™ll thrive. Youâ€™ll analyze financial data, make investment recommendations, and get to grips with budgeting. You might even simulate managing a portfolio or a companyâ€™s finances. It's practical stuff that helps you understand how money works in the real world.", 
    color: "bg-finance" 
  }, 
  { 
    question: "Hospitality and Tourism", 
    answer: "This sector is perfect if you're into travel and service. Youâ€™ll explore everything from marketing a hotel to planning events for tourists. Youâ€™ll also get to think about how to provide great customer service and create memorable experiences. It's a fun way to learn about an industry thatâ€™s all about people and enjoyment.", 
    color: "bg-hospitality-tourism" 
  }, 
  { 
    question: "Marketing", 
    answer: "In marketing, youâ€™ll learn how to promote products and connect with customers. You'll get to create marketing campaigns, analyze what works, and think creatively about branding. You might even pitch your ideas to a panel, which is a great way to build your confidence and communication skills.", 
    color: "bg-marketing" 
  }, 
  { 
    question: "Personal Financial Literacy", 
    answer: "This is all about getting smart with your money. Youâ€™ll learn how to budget, save, and plan for your financial future. Itâ€™s practical stuff that helps you understand things like credit, loans, and investments. Itâ€™s the kind of knowledge thatâ€™ll stick with you long after high school.", 
    color: "bg-personal-financial-literacy" 
  }
];

const tabContent = [
  { 
    id: "regional", 
    title: "Regional", 
    content: [
      "Hosted @ Montgomery Blair High School on Jan 4th",
      "You're automatically qualified for states so there are no stakes during this competition! (Try your best)",
      "1st Years are strongly recommended to go to regionals!",
      "A chance for you to get used to DECA (Roleplay or Written)",
      "Your best chance to practice a strategy!"
    ],
    image: RegionalImage
  },
  { 
    id: "state", 
    title: "State", 
    content: [
      "Hosted at College Park Marriot in Febuary (More Details Coming Soon)",
      "In order to qualify you must win Top 3 in your event (This will make sense just keep reading)",
      "Always wear a suit or formal clothing and BRING A PEN!!",
    ],
    image: StateImage
  },
  { 
    id: "international", 
    title: "International", 
    content: [
      "Hosted in Orlando Florida ðŸ˜Ž from April 26-29",
      "A international competition with thousands of students from across the globe!",
      "Practice your sales skills by trading pins for each state (You'll understand this when you get there)!",
      "A chance for you to win RM the DECA Glass!"
    ],
    image: DECAGlass
  }
];
---

<Layout metadata={metadata}>
  <HeroText
    tagline="DECA 101"
    title="What is DECA?"
    subtitle="DECA prepares emerging leaders and entrepreneurs for careers in marketing, finance, hospitality and management. You'll learn how to speak business, act business, and do business. Keep reading to learn what DECA really is..."
  />
  <div class="container mx-auto px-4">
    <div class="mb-8">
      <div class="tabs flex justify-center border-b relative">
        {tabContent.map((tab, index) => (
          <button class={`tab-btn px-4 py-2 ${index === 0 ? 'active' : ''}`} data-tab={tab.id}>
            {tab.title}
          </button>
        ))}
        <div class="tab-indicator"></div>
      </div>
      <div class="tab-content-container relative">
        {tabContent.map((tab, index) => (
          <div id={tab.id} class={`tab-content p-4 ${index === 0 ? 'active' : ''}`}>
            <div class="flex flex-col md:flex-row">
              <div class="md:w-1/2 pr-4">
                <h3 class="text-xl font-bold mb-4">{tab.title} Competition</h3>
                <ol class="list-decimal pl-5">
                  {tab.content.map((item, i) => (
                    <li key={i} class="mb-2">{item}</li>
                  ))}
                </ol>
              </div>
              <div class="md:w-1/2 mt-4 md:mt-0">
                <Image src={tab.image} alt={`${tab.title} Competition`} class="w-full h-auto rounded-lg shadow-md" />
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>

    <h2 class="text-2xl font-bold mb-4 text-center">Types of Competition</h2>
    <div class="flex justify-center">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8 max-w-4xl">
        {competitionTypes.map((type) => (
          <div class="p-4 bg-gradient-card rounded-lg shadow flex flex-col justify-between">
            <h3 class="text-xl font-bold mb-2 text-center text-white">{type.title}</h3>
            <p class="text-center text-white">{type.content}</p>
          </div>
        ))}
      </div>
    </div>

    <div class="faq-section">
      {faqRows.map((row, index) => (
        <div class="mb-2 faq-item rounded-lg overflow-hidden">
          <button class={`faq-question w-full text-left p-4 ${row.color} hover:bg-opacity-80 flex justify-between items-center font-bold`}>
            {row.question}
            <Icon name="tabler:chevron-down" class="w-5 h-5 transform transition-transform duration-300" />
          </button>
          <div class="faq-answer bg-white">
            <div class="faq-answer-content p-4">{row.answer}</div>
          </div>
        </div>
      ))}
    </div>
  </div>
</Layout>

<style>
  
  .bg-gradient-card {
    background: linear-gradient(to bottom, var(--aw-color-primary), var(--aw-color-secondary));
  }
  .tabs {
    position: relative;
  }
  .tab-btn {
    position: relative;
    z-index: 1;
    transition: color 0.3s;
  }
  .tab-btn.active {
    color: #4a90e2;
  }
  .tab-indicator {
    position: absolute;
    bottom: 0;
    height: 2px;
    background-color: #4a90e2;
    transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);
  }
  .tab-content-container {
    position: relative;
    overflow: hidden;
  }
  .tab-content {
    background-color: #f3f4f6;
    transition: opacity 0.3s, transform 0.3s;
    opacity: 0;
    transform: translateX(20px);
    display: none;
  }
  .tab-content.active {
    opacity: 1;
    transform: translateX(0);
    display: block;
  }
  .faq-answer {
    max-height: 0;
    transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
    opacity: 0;
    overflow: hidden;
  }
  .faq-question.active + .faq-answer {
    max-height: 500px;
    opacity: 1;
    transition: max-height 0.5s ease-in, opacity 0.3s ease-in;
  }
  .faq-answer-content {
    transform: translateY(-10px);
    transition: transform 0.3s ease-out;
  }
  .faq-question.active + .faq-answer .faq-answer-content {
    transform: translateY(0);
    transition: transform 0.3s ease-in;
  }
  .faq-question .tabler\:chevron-down {
    transition: transform 0.3s ease-in-out;
  }
  .faq-question.active .tabler\:chevron-down {
    transform: rotate(180deg);
  }
</style>

<script>
  function initDynamicFeatures() {
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');
    const tabIndicator = document.querySelector('.tab-indicator');

    function setIndicatorPosition(btn) {
      if (tabIndicator) {
        tabIndicator.style.width = `${btn.offsetWidth}px`;
        tabIndicator.style.left = `${btn.offsetLeft}px`;
      }
    }

    tabBtns.forEach((btn, index) => {
      if (index === 0) {
        setIndicatorPosition(btn);
      }

      btn.addEventListener('click', () => {
        tabBtns.forEach(b => b.classList.remove('active'));
        tabContents.forEach(content => content.classList.remove('active'));

        btn.classList.add('active');
        tabContents[index].classList.add('active');

        setIndicatorPosition(btn);
      });
    });

    const faqQuestions = document.querySelectorAll('.faq-question');
    faqQuestions.forEach((question) => {
      question.addEventListener('click', () => {
        question.classList.toggle('active');
        const answer = question.nextElementSibling;
        if (answer) {
          answer.style.maxHeight = answer.scrollHeight + 'px';
          setTimeout(() => {
            if (!question.classList.contains('active')) {
              answer.style.maxHeight = 0;
            }
          }, 300);
        }
      });
    });
  }

  initDynamicFeatures();
</script>
